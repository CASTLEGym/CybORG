from CybORG.Emulator.Actions.Velociraptor.ExploitAction import ExploitAction



credentials_file = "prog_client3.yaml"
hostname="TESTDOCKER1"
remote_hostname="172.17.0.4"
remote_username="vagrant"
remote_password="vagrant"
client_port=4443
server_port=22

exploit_action=ExploitAction(credentials_file,hostname,remote_hostname,remote_username,remote_password,client_port,server_port)
    
observation=exploit_action.execute(None)
print("Success is:",observation.success)
print("Connection Key is:",observation.connection_key)
print("Malicious file written?:",observation.malicious_file_write)
print("Exploit is:",observation.available_exploit)
print("connection info string is:",observation.ip_address_info)
print('Please clean the mess after test!!')

print('!! Cleaning mess, just for this testing, in real action cleaning need to be done by Blue Agent!!')
cleaned= exploit_action.run_command(observation.connection_key)
print('!!cleaned and connection',cleaned,'!!')
